webpackJsonp([30],{zh9g:function(t,s){},zzug:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("IHPB"),n=e.n(i),o={data:function(){return{page:1,pageSize:3,fans_list:[],is_follow:!1}},mounted:function(){this.showData()},computed:{},methods:{goback:function(){this.$router.go(-1)},loadList:function(){var t=this;t.$axios.get("/users/fans_list",{params:{token:storeWithExpiration.get("token"),page:t.page}}).then(function(s){console.log(s.data.data);var e=s.data.data;t.fans_list=[].concat(n()(t.fans_list),n()(e)),e.length<t.pageSize||30==t.page?t.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone"):(t.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.finishLoad"),t.page++)})},showData:function(){var t=this,s="/users/fans_list?token="+(window.storeWithExpiration.get("token")||"");t.$axios.get(s).then(function(s){if(200==s.status)for(var e=0;e<s.data.data.length;e++)t.fans_list.push(s.data.data[e])}).catch(function(t){console.log(t)})},follow:function(t,s){var e=this,i="/users/create_care?token="+(window.storeWithExpiration.get("token")||"")+"&fans_id="+t;e.$dialog.confirm({title:"粉丝关注",mes:"确定要关注此粉丝？",opts:function(){e.$axios.get(i).then(function(t){console.log(t),200==t.status&&2e3==t.data.code&&(e.$dialog.toast({mes:"关注成功",timeout:1e3,icon:"success"}),e.fans_list[s].is_care=t.data.state)}).catch(function(t){console.log(t)})}})},unfollow:function(t,s){var e=this,i="/users/cancel_care?token="+(window.storeWithExpiration.get("token")||"")+"&fans_id="+t;e.$dialog.confirm({title:"取消关注",mes:"确定要取消关注此粉丝？",opts:function(){e.$axios.get(i).then(function(t){console.log(t),200==t.status&&2e3==t.data.code&&(e.$dialog.toast({mes:"取消关注成功",timeout:1e3,icon:"success"}),e.fans_list[s].is_care=t.data.state)}).catch(function(t){console.log(t)})}})}}},a={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"margin"},[i("yd-navbar",{attrs:{fixed:!0}},[i("router-link",{attrs:{slot:"left",to:""},slot:"left"},[i("yd-navbar-back-icon",{nativeOn:{click:function(s){return t.goback(s)}}},[t._v("返回")])],1),t._v(" "),i("p",{staticStyle:{"font-size":".3rem"},attrs:{slot:"center"},slot:"center"},[t._v("粉丝")]),t._v(" "),i("img",{staticStyle:{width:".5rem"},attrs:{slot:"right",src:e("rgYI")},slot:"right"})],1),t._v(" "),i("yd-infinitescroll",{ref:"infinitescrollDemo",attrs:{callback:t.loadList}},[i("yd-list",{attrs:{slot:"list",theme:"1"},slot:"list"},[i("yd-cell-group",[t._l(t.fans_list,function(s,e){return[i("yd-cell-item",{staticStyle:{height:"1.5rem"}},[i("span",{attrs:{slot:"left"},slot:"left"},[i("img",{staticStyle:{width:"1rem","margin-right":".1rem"},attrs:{src:s.head_pic}})]),t._v(" "),i("span",{attrs:{slot:"left"},slot:"left"},[t._v(t._s(s.nickname))]),t._v(" "),0==s.is_care?i("span",{staticClass:"border_c_fan",attrs:{slot:"right"},on:{click:function(i){return t.follow(s.fans_id,e)}},slot:"right"},[t._v("关注")]):t._e(),t._v(" "),1==s.is_care?i("span",{staticClass:"border_c_fan",attrs:{slot:"right"},on:{click:function(i){return t.unfollow(s.fans_id,e)}},slot:"right"},[t._v("取消关注")]):t._e()])]})],2)],1),t._v(" "),i("span",{attrs:{slot:"doneTip"},slot:"doneTip"},[t._v("暂没有更多粉丝关注")])],1)],1)},staticRenderFns:[]};var l=e("C7Lr")(o,a,!1,function(t){e("zh9g")},null,null);s.default=l.exports}});
//# sourceMappingURL=30.cc80976e04e1635690b2.js.map
{"version":3,"sources":["webpack:///src/components/user/fans/fan_index.vue","webpack:///./src/components/user/fans/fan_index.vue?83ba","webpack:///./src/components/user/fans/fan_index.vue"],"names":["fan_index","data","page","pageSize","fans_list","is_follow","mounted","this","showData","computed","methods","goback","$router","go","loadList","that","$axios","get","params","token","storeWithExpiration","then","response","console","log","_list","concat","toConsumableArray_default","length","$refs","infinitescrollDemo","$emit","_that","url","window","status","i","push","catch","error","follow","fid","index","$dialog","confirm","title","mes","opts","code","toast","timeout","icon","is_care","unfollow","fans_fan_index","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fixed","slot","to","nativeOn","click","$event","_v","staticStyle","font-size","width","src","__webpack_require__","ref","callback","theme","_l","item","height","margin-right","head_pic","_s","nickname","on","fans_id","_e","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/30.cc80976e04e1635690b2.js","sourcesContent":["<template>\r\n    <div class=\"margin\">\r\n        <!--顶部导航-->\r\n        <yd-navbar :fixed=\"true\" >\r\n            <router-link   to=\"\" slot=\"left\" >\r\n                <yd-navbar-back-icon     @click.native=\"goback\">返回</yd-navbar-back-icon>\r\n            </router-link>\r\n            <p style=\"font-size: .3rem\" slot=\"center\">粉丝</p>\r\n            <img slot=\"right\" style=\"width: .5rem\" src=\"@/assets/images/user/different.png\"/>\r\n        </yd-navbar>\r\n        <!--个人信息设置-->\r\n        <yd-infinitescroll :callback=\"loadList\" ref=\"infinitescrollDemo\">\r\n\r\n        <yd-list theme=\"1\" slot=\"list\">\r\n            <yd-cell-group>\r\n                <template v-for=\"(item , index) in fans_list\">\r\n                    <yd-cell-item style=\"height: 1.5rem;\" >\r\n                        <span slot=\"left\"> <img style=\"width:1rem; margin-right: .1rem;\" :src=\"item.head_pic\"/></span>\r\n                        <span slot=\"left\">{{ item.nickname }}</span>\r\n                        <span slot=\"right\" class=\"border_c_fan\" v-if=\"item.is_care == 0\"  v-on:click=\"follow(item.fans_id,index)\">关注</span>\r\n                        <span slot=\"right\" class=\"border_c_fan\" v-if=\"item.is_care == 1\" v-on:click=\"unfollow(item.fans_id,index)\">取消关注</span>\r\n                    </yd-cell-item>\r\n                </template>\r\n            </yd-cell-group>\r\n        </yd-list>\r\n\r\n        <!-- 数据全部加载完毕显示 -->\r\n        <span slot=\"doneTip\">暂没有更多粉丝关注</span>\r\n\r\n        <!-- 加载中提示，不指定，将显示默认加载中图标 -->\r\n\r\n\r\n    </yd-infinitescroll>\r\n        <!--收获地址-->\r\n\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                page:1,\r\n                pageSize: 3,\r\n                fans_list : [],\r\n                is_follow : false,\r\n            }\r\n        },\r\n        mounted: function () {\r\n            this.showData();\r\n        },\r\n        computed: {\r\n\r\n        },\r\n        methods: {\r\n            goback () {\r\n                this.$router.go(-1)\r\n            },\r\n            loadList() {\r\n                var that = this;\r\n                that.$axios.get('/users/fans_list', {\r\n                    params: {\r\n                        token: storeWithExpiration.get('token'),\r\n                        page:that.page\r\n                    }\r\n                }).then(function (response) {\r\n                    console.log(response.data.data)\r\n                    const _list = response.data.data;\r\n\r\n                    that.fans_list = [...that.fans_list, ..._list];\r\n\r\n                    if (_list.length < that.pageSize || that.page == 30) {\r\n                        /* 所有数据加载完毕 */\r\n                        that.$refs.infinitescrollDemo.$emit('ydui.infinitescroll.loadedDone');\r\n                        return;\r\n                    }\r\n\r\n                    /* 单次请求数据完毕 */\r\n                    that.$refs.infinitescrollDemo.$emit('ydui.infinitescroll.finishLoad');\r\n\r\n                    that.page++;\r\n                });\r\n            },\r\n            showData : function () {\r\n                var _that =this;\r\n                var token = window.storeWithExpiration.get('token') || '';\r\n                var url = \"/users/fans_list?token=\" + token;\r\n                _that.$axios.get(url).then(function (response) {\r\n\r\n                    if (response.status == 200){\r\n                        //粉丝列表\r\n                        for(var i=0;i<response.data.data.length;i++){\r\n                            _that.fans_list.push(response.data.data[i]);\r\n                        }\r\n                        //_that.start = response.data['fans_count'];\r\n\r\n                    }\r\n\r\n                }).catch(function (error) {\r\n                    console.log(error);\r\n                });\r\n            },\r\n\r\n            follow(fid,index){\r\n                var _that =this;\r\n                var token = window.storeWithExpiration.get('token') || '';\r\n                var url = \"/users/create_care?token=\" + token + '&fans_id=' + fid;\r\n                _that.$dialog.confirm({\r\n                    title: '粉丝关注',\r\n                    mes: '确定要关注此粉丝？',\r\n                    opts: () => {\r\n                        //this.$dialog.toast({mes: '你点了确定', timeout: 1000});\r\n                        _that.$axios.get(url).then(function (response) {\r\n                            console.log(response);\r\n                            if (response.status == 200){\r\n                                if (response.data.code == 2000){\r\n                                    _that.$dialog.toast({\r\n                                        mes: '关注成功',\r\n                                        timeout: 1000,\r\n                                        icon: 'success'\r\n                                    });\r\n                                    _that.fans_list[index].is_care = response['data']['state'];\r\n\r\n                                }\r\n                            }\r\n\r\n                        }).catch(function (error) {\r\n                            console.log(error);\r\n                        });\r\n                    }\r\n                });\r\n\r\n\r\n            },\r\n            unfollow(fid,index){\r\n                var _that =this;\r\n                var token = window.storeWithExpiration.get('token') || '';\r\n                var url = \"/users/cancel_care?token=\" + token + '&fans_id=' + fid;\r\n                _that.$dialog.confirm({\r\n                    title: '取消关注',\r\n                    mes: '确定要取消关注此粉丝？',\r\n                    opts: () => {\r\n                        //this.$dialog.toast({mes: '你点了确定', timeout: 1000});\r\n                        _that.$axios.get(url).then(function (response) {\r\n                            console.log(response);\r\n                            if (response.status == 200){\r\n                                if (response.data.code == 2000){\r\n                                    _that.$dialog.toast({\r\n                                        mes: '取消关注成功',\r\n                                        timeout: 1000,\r\n                                        icon: 'success'\r\n                                    });\r\n                                    _that.fans_list[index].is_care = response['data']['state'];\r\n\r\n                                }\r\n                            }\r\n\r\n                        }).catch(function (error) {\r\n                            console.log(error);\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n</script>\r\n<style>\r\n    .margin{ padding-top: 1.05rem;}\r\n    .border_c_fan{border: 1px solid #af773e; color:#af773e; padding: .1rem .3rem; }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/user/fans/fan_index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"margin\"},[_c('yd-navbar',{attrs:{\"fixed\":true}},[_c('router-link',{attrs:{\"slot\":\"left\",\"to\":\"\"},slot:\"left\"},[_c('yd-navbar-back-icon',{nativeOn:{\"click\":function($event){return _vm.goback($event)}}},[_vm._v(\"返回\")])],1),_vm._v(\" \"),_c('p',{staticStyle:{\"font-size\":\".3rem\"},attrs:{\"slot\":\"center\"},slot:\"center\"},[_vm._v(\"粉丝\")]),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\".5rem\"},attrs:{\"slot\":\"right\",\"src\":require(\"@/assets/images/user/different.png\")},slot:\"right\"})],1),_vm._v(\" \"),_c('yd-infinitescroll',{ref:\"infinitescrollDemo\",attrs:{\"callback\":_vm.loadList}},[_c('yd-list',{attrs:{\"slot\":\"list\",\"theme\":\"1\"},slot:\"list\"},[_c('yd-cell-group',[_vm._l((_vm.fans_list),function(item,index){return [_c('yd-cell-item',{staticStyle:{\"height\":\"1.5rem\"}},[_c('span',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('img',{staticStyle:{\"width\":\"1rem\",\"margin-right\":\".1rem\"},attrs:{\"src\":item.head_pic}})]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_vm._v(_vm._s(item.nickname))]),_vm._v(\" \"),(item.is_care == 0)?_c('span',{staticClass:\"border_c_fan\",attrs:{\"slot\":\"right\"},on:{\"click\":function($event){return _vm.follow(item.fans_id,index)}},slot:\"right\"},[_vm._v(\"关注\")]):_vm._e(),_vm._v(\" \"),(item.is_care == 1)?_c('span',{staticClass:\"border_c_fan\",attrs:{\"slot\":\"right\"},on:{\"click\":function($event){return _vm.unfollow(item.fans_id,index)}},slot:\"right\"},[_vm._v(\"取消关注\")]):_vm._e()])]})],2)],1),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"doneTip\"},slot:\"doneTip\"},[_vm._v(\"暂没有更多粉丝关注\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-a9184a4e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/user/fans/fan_index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a9184a4e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./fan_index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./fan_index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./fan_index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a9184a4e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./fan_index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user/fans/fan_index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
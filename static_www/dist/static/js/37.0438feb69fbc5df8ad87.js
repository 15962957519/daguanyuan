webpackJsonp([37],{"5zVT":function(t,i){},i0mU:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("IHPB"),n=e.n(o),s=e("xd7I"),l=e("LCQY");s.default.component(l.InfiniteScroll.name,l.InfiniteScroll);var a={data:function(){return{page:1,pageSize:6,list:[]}},created:function(){this.loadList()},methods:{goback:function(){this.$router.go(-1)},loadList:function(){var t=this;t.$axios.get("/collect_list",{params:{token:storeWithExpiration.get("token"),page:t.page}}).then(function(i){var e=i.data.data;t.list=[].concat(n()(t.list),n()(e)),e.length<t.pageSize||30==t.page?t.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone"):(t.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.finishLoad"),t.page++)})},unfollow:function(t){var i=t,e=this,o="/del_collectlist?token="+(window.storeWithExpiration.get("token")||"")+"&goods_id="+i;e.$dialog.confirm({title:"取消收藏",mes:"确定要取消收藏吗？",opts:function(){e.$axios.get(o).then(function(t){if(200==t.status)return t.data}).then(function(t){if(2e3==t.code){e.$dialog.toast({mes:"取消收藏成功",timeout:1e3,icon:"success"});for(var o=0;o<e.list.length;o++)i==e.list[o].goods_id&&e.list.splice(o,1)}}).catch(function(t){console.log(t)})}})},deleteItemall:function(){var t=this;t.list.length>0?t.$dialog.confirm({title:"确定要清空所有收藏吗？",mes:"确认!",opts:function(){window.storeWithExpiration.get("token");t.$axios.get("/users/clearcollectlist",{params:{token:storeWithExpiration.get("token")}}).then(function(t){if("200"==t.status)return t.data}).then(function(i){t.list.splice(0,t.list.length)}).catch(function(t){console.log(t)})}}):t.$dialog.alert({mes:"收藏空空如也，暂不需要清理"})}}},r={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"margin"},[e("yd-navbar",{attrs:{fixed:!0}},[e("router-link",{attrs:{slot:"left",to:""},slot:"left"},[e("yd-navbar-back-icon",{nativeOn:{click:function(i){return t.goback(i)}}},[t._v("返回")])],1),t._v(" "),e("p",{staticStyle:{"font-size":".3rem"},attrs:{slot:"center"},slot:"center"},[t._v("收藏")]),t._v(" "),e("yd-button",{attrs:{slot:"right",type:"hollow"},nativeOn:{click:function(i){return t.deleteItemall(i)}},slot:"right"},[t._v("清空")])],1),t._v(" "),[e("yd-infinitescroll",{ref:"infinitescrollDemo",attrs:{callback:t.loadList}},[e("yd-list",{attrs:{slot:"list",theme:"1"},slot:"list"},t._l(t.list,function(i,o){return e("yd-list-item",{key:o},[e("img",{attrs:{slot:"img",src:i.original_img},slot:"img"}),t._v(" "),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(i.goods_name))]),t._v(" "),e("yd-list-other",{attrs:{slot:"other"},slot:"other"},[e("div",[e("span",{staticClass:"list-del-price"},[t._v("¥"+t._s(i.shop_price))])]),t._v(" "),e("yd-button",{staticClass:"border_c",attrs:{type:"hollow"},nativeOn:{click:function(e){return t.unfollow(i.goods_id)}}},[t._v("取消收藏")])],1)],1)}),1),t._v(" "),e("span",{attrs:{slot:"doneTip"},slot:"doneTip"},[t._v("暂时没有很多收藏...")]),t._v(" "),e("img",{attrs:{slot:"loadingTip",src:"http://static.ydcss.com/uploads/ydui/loading/loading10.svg"},slot:"loadingTip"})],1)]],2)},staticRenderFns:[]};var c=e("C7Lr")(a,r,!1,function(t){e("5zVT")},null,null);i.default=c.exports}});
//# sourceMappingURL=37.0438feb69fbc5df8ad87.js.map
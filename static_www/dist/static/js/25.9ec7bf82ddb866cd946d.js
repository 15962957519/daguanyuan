webpackJsonp([25],{"5GVY":function(t,e){},EURH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("IHPB"),o=n.n(i),r=n("xd7I"),s=n("geE6");r.default.component(s.PullRefresh.name,s.PullRefresh);var a={data:function(){return{page:1,pageSize:3,list:[],startX:0,endX:0}},mounted:function(){this.showData()},methods:{loadList:function(){var t=this;t.$axios.get("/users/footprint",{params:{token:storeWithExpiration.get("token"),page:t.page}}).then(function(e){var n=e.data.data;t.list=[].concat(o()(t.list),o()(n)),n.length<t.pageSize||30==t.page?t.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.loadedDone"):(t.$refs.infinitescrollDemo.$emit("ydui.infinitescroll.finishLoad"),t.page++)})},goback:function(){this.$router.go(-1)},showData:function(){var t=this,e="/users/footprint?token="+(window.storeWithExpiration.get("token")||"");t.$axios.get(e).then(function(t){if(200==t.status)return t.data.data}).then(function(e){for(var n=0;n<e.length;n++)t.list.push(e[n])}).catch(function(t){console.log(t)})},delet_good:function(t){alert(t);var e=this,n="/users/cancel_care?token="+(window.storeWithExpiration.get("token")||"")+"&fans_id="+t;e.$dialog.confirm({title:"删除足迹",mes:"确定要删除此足迹？",opts:function(){e.$axios.get(n).then(function(t){if(200==t.status)return t.data}).then(function(n){if(console.log(n),2e3==n.code){e.$dialog.toast({mes:"取消关注成功",timeout:1e3,icon:"success"});for(var i=0;i<e.follow.length;i++)t==e.follow[i].fans_id&&e.follow.splice(i,1)}}).catch(function(t){console.log(t)})}})},skip:function(t){var e=t;this.checkSlide()?this.restSlide():this.$router.push({path:"/productlists/"+e})},touchStart:function(t){this.startX=t.touches[0].clientX},touchEnd:function(t){var e=t.currentTarget.parentElement;this.endX=t.changedTouches[0].clientX,0==e.dataset.type&&this.startX-this.endX>30&&(this.restSlide(),e.dataset.type=1),1==e.dataset.type&&this.startX-this.endX<-30&&(this.restSlide(),e.dataset.type=0),this.startX=0,this.endX=0},checkSlide:function(){for(var t=document.querySelectorAll(".list-item"),e=0;e<t.length;e++)if(1==t[e].dataset.type)return!0;return!1},restSlide:function(){for(var t=document.querySelectorAll(".list-item"),e=0;e<t.length;e++)t[e].dataset.type=0},deleteItem:function(t){var e=this,n=t.currentTarget.dataset.index;e.restSlide();var i=e.list[n].goods_id;e.list.splice(n,1);var o=window.storeWithExpiration.get("token");e.$axios.get("/users/delfootprint",{params:{token:o,goods_id:i}}).then(function(t){if("200"==t.status)return t.data}).then(function(t){e.$dialog.alert({mes:"删除成功"})}).catch(function(t){console.log(t)})},deleteItemall:function(){var t=this;t.list.length>0?t.$dialog.confirm({title:"确定要清空所有足迹吗？",mes:"确认!",opts:function(){window.storeWithExpiration.get("token");t.$axios.get("/users/clearfootprint",{params:{token:storeWithExpiration.get("token")}}).then(function(t){if("200"==t.status)return t.data}).then(function(e){t.list.splice(0,t.list.length)}).catch(function(t){console.log(t)})}}):t.$dialog.alert({mes:"足迹空空如也，暂不需要清理"})},date:function(t){var e=new Date(1e3*t),n="",i=((new Date).getTime()-e.getTime())/1e3;i<300?n="刚刚":i>=300&&i<3600?n=parseInt(i/60)+"分钟前":i>=3600&&i<86400?n=parseInt(i/3600)+"小时前":i>=86400&&i<2592e3?n=parseInt(i/3600/24)+"天前":i>=2592e3&&i<31104e3?n=parseInt(i/3600/24/30)+"个月前":t>=31104e3&&(n=parseInt(i/3600/24/30/12)+"年前");e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds();return n}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"margin"},[n("yd-navbar",{attrs:{fixed:!0}},[n("router-link",{attrs:{slot:"left",to:""},slot:"left"},[n("yd-navbar-back-icon",{nativeOn:{click:function(e){return t.goback(e)}}},[t._v("返回")])],1),t._v(" "),n("p",{staticStyle:{"font-size":".3rem"},attrs:{slot:"center"},slot:"center"},[t._v("足迹")]),t._v(" "),n("yd-button",{attrs:{slot:"right",type:"hollow"},nativeOn:{click:function(e){return t.deleteItemall(e)}},slot:"right"},[t._v("清空")])],1),t._v(" "),n("div",{staticClass:"container",staticStyle:{width:"100%",overflow:"hidden"}},[n("div",{staticClass:"page-title"},[t._v("左滑可清除单个足迹")]),t._v(" "),n("ul",[n("yd-infinitescroll",{ref:"infinitescrollDemo",attrs:{callback:t.loadList}},[n("yd-list",{attrs:{slot:"list",theme:"1"},slot:"list"},[n("yd-cell-group",t._l(t.list,function(e,i){return n("li",{staticClass:"list-item ",attrs:{"data-type":"0"}},[n("div",{staticClass:"list-box",on:{"!touchstart":function(e){return t.touchStart(e)},"!touchend":function(e){return t.touchEnd(e)},click:function(n){return t.skip(e.goods_id)}}},[n("img",{staticClass:"list-img",attrs:{src:e.original_img,alt:""}}),t._v(" "),n("div",{staticClass:"list-content"},[n("p",{staticClass:"title"},[t._v(t._s(e.goods_id)+t._s(e.goods_name))]),t._v(" "),n("p",{staticClass:"tips"},[n("em",[t._v("¥")]),t._v(t._s(e.start_price)+" ")]),t._v(" "),n("p",{staticClass:"time"},[t._v(t._s(t.date(e.visittime)))])])]),t._v(" "),n("div",{staticClass:"delete",attrs:{"data-index":i},on:{click:t.deleteItem}},[t._v("删除")])])}),0)],1),t._v(" "),n("span",{attrs:{slot:"doneTip"},slot:"doneTip"},[t._v("暂没有更多足迹")])],1)],1)])],1)},staticRenderFns:[]};var l=n("C7Lr")(a,f,!1,function(t){n("5GVY")},null,null);e.default=l.exports},geE6:function(t,e,n){var i;i=function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/dist/",e(0)}({0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PullRefresh=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(117));e.PullRefresh=i.default},1:function(t,e){t.exports=function(t,e,n,i){var o,r=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(o=t,r=t.default);var a="function"==typeof r?r.options:r;if(e&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns),n&&(a._scopeId=n),i){var f=a.computed||(a.computed={});Object.keys(i).forEach(function(t){var e=i[t];f[t]=function(){return e}})}return{esModule:o,exports:r,options:a}}},2:function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},3:function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],i=l[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(r(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(r(n.parts[o]));l[n.id]={id:n.id,refs:1,parts:s}}}}function o(){var t=document.createElement("style");return t.type="text/css",v.appendChild(t),t}function r(t){var e,n,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(u)return T;i.parentNode.removeChild(i)}if(p){var r=d++;i=c||(c=o()),e=s.bind(null,i,r,!1),n=s.bind(null,i,r,!0)}else i=o(),e=function(t,e){var n=e.css,i=e.media,o=e.sourceMap;if(i&&t.setAttribute("media",i),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}function s(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=h(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}var a="undefined"!=typeof document,f=n(4),l={},v=a&&(document.head||document.getElementsByTagName("head")[0]),c=null,d=0,u=!1,T=function(){},p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){u=n;var o=f(t,e);return i(o),function(e){for(var n=[],r=0;r<o.length;r++){var s=o[r];(a=l[s.id]).refs--,n.push(a)}e?i(o=f(t,e)):o=[];for(r=0;r<n.length;r++){var a;if(0===(a=n[r]).refs){for(var v=0;v<a.parts.length;v++)a.parts[v]();delete l[a.id]}}}};var h=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},4:function(t,e){t.exports=function(t,e){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],s=r[0],a={id:t+":"+o,css:r[1],media:r[2],sourceMap:r[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}},5:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=function(t){t.preventDefault(),t.stopPropagation()},e=!1;return{lock:function(n){e||(e=!0,(n||document).addEventListener("touchmove",t))},unlock:function(n){e=!1,(n||document).removeEventListener("touchmove",t)}}}(),i={lock:function(t){o&&s(t||document.body,"g-fix-ios-prevent-scroll")},unlock:function(t){o&&a(t||document.body,"g-fix-ios-prevent-scroll")}},o=!!(window.navigator&&window.navigator.userAgent||"").match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),r=function(t,e){return!(0===(e=e||"").replace(/\s/g,"").length||!t)&&new RegExp(" "+e+" ").test(" "+t.className+" ")},s=function(t,e){r(t,e)||(t.className=""===t.className?e:t.className+" "+e)},a=function(t,e){if(r(t,e)){for(var n=" "+t.className.replace(/[\t\r\n]/g,"")+" ";n.indexOf(" "+e+" ")>=0;)n=n.replace(" "+e+" "," ");t.className=n.replace(/^\s+|\s+$/g,"")}};e.pageScroll=n,e.preventScroll=i,e.isIOS=o,e.isColor=function(t){return/^#([a-fA-F0-9]){3}(([a-fA-F0-9]){3})?$/.test(t)||/^[rR][gG][bB][aA]\(\s*((25[0-5]|2[0-4]\d|1?\d{1,2})\s*,\s*){3}\s*(\.|\d+\.)?\d+\s*\)$/.test(t)||/^[rR][gG][bB]\(\s*((25[0-5]|2[0-4]\d|1?\d{1,2})\s*,\s*){2}(25[0-5]|2[0-4]\d|1?\d{1,2})\s*\)$/.test(t)},e.getScrollview=function(t){for(var e=t;e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType;){var n=document.defaultView.getComputedStyle(e).overflowY;if("scroll"===n||"auto"===n)return e;e=e.parentNode}return window},e.checkInview=function(t,e){var n=t===window?document.body.offsetHeight:t.offsetHeight,i=t===window?0:t.getBoundingClientRect().top,o=e.getBoundingClientRect().top-i,r=o+e.offsetHeight;return o>=0&&o<n||r>0&&r<=n},e.addClass=s,e.removeClass=a,e.scrollTop=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments[4];window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)});var r=Math.abs(e-n);!function e(n,i,r){if(n!==i){var s=n+r>i?i:n+r;n>i&&(s=n-r<i?i:n-r),t===window?window.scrollTo(s,s):t.scrollTop=s,window.requestAnimationFrame(function(){return e(s,i,r)})}else"function"==typeof o&&o()}(e,n,Math.ceil(r/i*50))}},39:function(t,e,n){(t.exports=n(2)()).push([t.id,'@-webkit-keyframes yd-kf-backrotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(-1turn);transform:rotate(-1turn)}}@keyframes yd-kf-backrotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(-1turn);transform:rotate(-1turn)}}.yd-pullrefresh-animation-timing{-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.yd-pullrefresh-dragtip{pointer-events:none;position:absolute;top:-36px;left:0;z-index:996;-webkit-transform:translate(0);transform:translate(0);width:100%;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#6e6e6e;font-size:14px;height:36px;text-align:center;background-color:rgba(240,250,250,.9)}.yd-pullrefresh-dragtip,.yd-pullrefresh-dragtip-icon{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.yd-pullrefresh-dragtip-icon{height:100%}.yd-pullrefresh-dragtip-icon>i{width:14px;height:14px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAABa1BMVEVTfvH///9TfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFAPDq2AAAAeHRSTlMAAAECAwQGBwkLDQ8QERMUFRkiIyYnLS4vMjM1Njc4OTpAQUJDREVGTVJWXmBiZmdoaWpxc3V8f4GCg4SGiIyNj5aXmZqbnJ+go6SlpqmqrK+wub2/wMHCxMXJzM3P0tPU1djd3t/n6Orr7O7w8fP09fb3+Pn6/f5+D/4+AAABqklEQVQ4y43V+T8CQRQA8GklUeQmhESuHBHJUY5EIWeHECGrcpVV++eb2Z3Y2d22eT+9mfm2n880894AQIRpKnDxVCh/sanD+c7/aS8PdDoCOqPfvCRu3c1VKaOOFC+P3LJBlAQ1h3m1uB8UpJRan/FaOX3i39jaj5fw+OeIJ6nzQ1y4crXhGeP43qfk63/UwQnjxDCxS4ufU9DeNzQqLTBAFn1y2vKIBi9WoAivnAZR/tqtJTG1lWFaHNKUmF6i1K0tRWpDWZLRliINoWykjhRo0ztMYqBuQGpHv3FR0TV07q1U9AzSO0BFM5BG6GgO0nU6ikpkhY5y9DQPqY9+W2E6ek7/Z/noj2CM/mCF6xKnouIlHKWiwtW+ZmqjGV8XpmLBLNWUHXm+Ep+VlGHJVkMaYuhLO/WKG4b+GC2yZqJlsCotAxhPhcqaBrJGtKjYW39akAEA6rS3dr/YxCN6CQWTuGkmXBY802gP4bndBiClYKDaiisP0e3NwEGyWG3NqwwgKWzwFbUGn52QnJbms+ExAjWqeIwyHhN5BxRPXLbAc+xNcK5Hdl1+ASkP8ND4fLD1AAAAAElFTkSuQmCC") no-repeat;display:inline-block;background-size:14px 14px;margin-right:6px}.yd-pullrefresh-dragtip-icon>i.yd-pullrefresh-loading{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAABcVBMVEVTfvH///9TfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvFTfvG7eWgbAAAAenRSTlMAAAECAwQGBwkKCw0PEBETFBUZIiMmJy0uLzIzNTY3ODk6QEFCQ0RFRktNUlZeYGJmZ2hpanFzdXyBgoOEhoiMjY+Wl5mam5yfoKOkpqmqrK+wuLm6vb/AwcLExcnMzc/S09TV2N3e3+fo6uvs7vDx8/T19vf4+fr9/naKfqcAAAGISURBVDjLjZVVW0JBEEBXDLC7FbsVuzDAwO7E7sAORDi/3od7/T72Ajrztjvn4c7dmTNKaZHV7t2+eQ5/BI4Xewq1TFKSdmxZ+yIqTvszEqCNx1jjcTAtDpq9RLy4qIpBK27NXPh81TM+OecPmufvNgva8mYk9ly55o2jafYdYMuuo40hAA5qtCrzPCF20vUPKH0BCPbalCXKfOl6WZnXAPcV6q8wUB/AQ7H6H3WGgc9qJUB3AfqVAHUCHNok6DxArRKg9ldgX0nQegCXCB0FwjkidAM4UyL0CliWoY/AmAz9AoZlaEiOPgFueVlLMnRT/rPc8idokD+s/RXwi1CjCeuUuLWP/mjtTneRNjADCcmCJyL+rqgxDDoTkGn7ANOC4U5ZAQhka8oIxFOGYx2ADquI+mJqKz8HwPuv3vI9hsSXU6Kl2WpK88CVZ96k1s+bdzPJuoorf1UcuVybmvAuHH7+qnnEFiv4SDzB3zVL18aQQ7aMroayEu4tY8XdPRMKnPi6Syzt8gMGxsBO8KgZSQAAAABJRU5ErkJggg==") no-repeat;background-size:14px 14px;-webkit-animation:yd-kf-backrotate .5s linear infinite;animation:yd-kf-backrotate .5s linear infinite}.yd-pullrefresh-draghelp{width:100%;height:100%;position:fixed;top:0;left:0;z-index:500;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.yd-pullrefresh-draghelp>div{width:2.3rem;height:2.3rem;background-color:rgba(0,0,0,.8)}.yd-pullrefresh-draghelp>div:before{content:"\\E60D";font-family:YDUI-INLAY;font-size:.88rem;text-align:center;color:#fff;display:block;padding-top:.36rem}.yd-pullrefresh-draghelp>div>span{text-align:center;color:#fff;font-size:.28rem;display:block;padding-top:.2rem}',""])},117:function(t,e,n){n(217);var i=n(1)(n(297),n(147),null,null);t.exports=i.exports},147:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"dragBox"},[t._t("default"),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.touches.isDraging,expression:"touches.isDraging"}],ref:"dragTip",staticClass:"yd-pullrefresh-dragtip",class:t.dragTip.animationTiming,style:{transform:"translate3d(0, "+t.dragTip.translate+"px, 0)"}},[n("span",{staticClass:"yd-pullrefresh-dragtip-icon"},[n("i",{class:t.dragTip.loadingIcon,style:{transform:"rotate("+t.dragTip.iconRotate+"deg)"}}),t._v("\n                "+t._s(t.dragTip.statusText)+"\n            ")])])],2),t._v(" "),t.showHelpTag?n("div",{staticClass:"yd-pullrefresh-draghelp",on:{click:function(e){t.showHelpTag=!1}}},[t._m(0)]):t._e()])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[t._v("下拉更新")])])}]}},217:function(t,e,n){var i=n(39);"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),n(3)("27f4832d",i,!0)},297:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5);e.default={name:"yd-pullrefresh",props:{callback:{type:Function},stopDrag:{type:Boolean,default:!1},pullText:{type:String,default:"下拉刷新"},dropText:{type:String,default:"松开加载"},loadingText:{type:String,default:"加载中..."},showInitTip:{type:Boolean,default:!0}},data:function(){return{showHelpTag:!1,dragTip:{statusText:this.pullText,animationTiming:"",translate:0,distance:36,iconRotate:0,loadingIcon:""},touches:{loading:!1,startClientY:0,moveOffset:0,isDraging:!1},limitSpeed:0,isDragToUp:!1}},methods:{init:function(){this.offsetTop=this.$refs.dragBox.getBoundingClientRect().top,this.bindEvents(),this.$on("ydui.pullrefresh.finishLoad",this.resetParams),this.showHelp()},showHelp:function(){var t=this;if(this.showInitTip){var e="PULLREFRESH-TIP",n=window.localStorage;1!=n.getItem(e)&&(this.showHelpTag=!0,setTimeout(function(){t.showHelpTag=!1},5e3)),n.setItem(e,1)}},bindEvents:function(){var t=this.$refs.dragBox;t.addEventListener("touchstart",this.touchStartHandler),t.addEventListener("touchmove",this.touchMoveHandler),t.addEventListener("touchend",this.touchEndHandler),document.body.addEventListener("touchmove",this.stopDragEvent,{passive:!1})},unbindEvents:function(){var t=this.$refs.dragBox;t.removeEventListener("touchstart",this.touchStartHandler),t.removeEventListener("touchmove",this.touchMoveHandler),t.removeEventListener("touchend",this.touchEndHandler),document.body.removeEventListener("touchmove",this.stopDragEvent,{passive:!1})},stopDragEvent:function(t){this.touches.isDraging&&t.preventDefault()},getScrollTop:function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},touchStartHandler:function(t){if(!this.stopDrag)return this.touches.loading?void t.preventDefault():void(this.scrollview.scrollTop>0||this.$refs.dragBox.getBoundingClientRect().top<this.offsetTop||(this.touches.startClientX=t.touches[0].clientX,this.touches.startClientY=t.touches[0].clientY))},touchMoveHandler:function(t){var e=this.touches;if(!this.stopDrag&&!this.isDragToUp){if(this.touches.loading)return void t.preventDefault();if(this.scrollview.scrollTop>0)return this.dragTip.translate=0,void this.resetParams();var n=t.touches[0].clientY,i=t.touches[0].clientX;if(n-e.startClientY<0)return void(this.isDragToUp=!0);if(!(e.startClientY>n||this.$refs.dragBox.getBoundingClientRect().top<this.offsetTop))if(0===this.getScrollTop(this.scrollview)&&t.preventDefault(),e.isDraging=!0,!(90-180*Math.atan2(Math.abs(n-e.startClientY),Math.abs(i-e.startClientX))/Math.PI>45)){var o=n-e.startClientY;o>=this.dragTip.distance&&(this.dragTip.statusText=this.dropText,o=this.dragTip.distance),this.dragTip.iconRotate=o/.25,this.limitSpeed+=5,this.limitSpeed<o&&(o=this.limitSpeed),e.moveOffset=this.dragTip.translate=o}}},touchEndHandler:function(t){if(!this.stopDrag){this.isDragToUp=!1;var e=this.touches;if(e.loading)return void t.preventDefault();if(!(this.$refs.dragBox.getBoundingClientRect().top<this.offsetTop))return this.dragTip.animationTiming="yd-pullrefresh-animation-timing",e.moveOffset>=this.dragTip.distance?(this.dragTip.statusText=this.loadingText,this.dragTip.loadingIcon="yd-pullrefresh-loading",void this.triggerLoad()):void this.resetParams()}},triggerLoad:function(){this.touches.loading=!0,this.callback&&this.callback()},resetParams:function(){var t=this;this.dragTip.translate=0,setTimeout(function(){var e=t.touches,n=t.dragTip;e.isDraging=!1,e.loading=!1,n.animationTiming="",e.moveOffset=0,n.translate=0,n.statusText=t.pullText,n.loadingIcon="",n.iconRotate=0,t.limitSpeed=0},200)}},mounted:function(){this.scrollview=(0,i.getScrollview)(this.$el),this.$nextTick(this.init)},beforeDestroy:function(){this.unbindEvents()}}}})},t.exports=i()}});
//# sourceMappingURL=25.9ec7bf82ddb866cd946d.js.map
{"version":3,"sources":["webpack:///src/components/user/fans/follow.vue","webpack:///./src/components/user/fans/follow.vue?00ce","webpack:///./src/components/user/fans/follow.vue"],"names":["vue_esm","component","infinitescroll","name","follow","data","page","pageSize","list","created","this","loadList","methods","goback","$router","go","that","$axios","get","params","token","storeWithExpiration","then","response","_list","concat","toConsumableArray_default","length","$refs","infinitescrollDemo","$emit","unfollow","e","goods_id","_that","url","window","$dialog","confirm","title","mes","opts","res","status","code","toast","timeout","icon","i","splice","catch","error","console","log","deleteItemall","json","ex","alert","fans_follow","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fixed","slot","to","nativeOn","click","$event","_v","staticStyle","font-size","type","ref","callback","theme","_l","item","key","src","original_img","_s","goods_name","shop_price","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/37.0438feb69fbc5df8ad87.js","sourcesContent":["<template>\r\n    <div class=\"margin\">\r\n        <!--顶部导航-->\r\n        <yd-navbar :fixed=\"true\" >\r\n            <router-link   to=\"\" slot=\"left\" >\r\n                <yd-navbar-back-icon     @click.native=\"goback\">返回</yd-navbar-back-icon>\r\n            </router-link>\r\n            <p style=\"font-size: .3rem\" slot=\"center\">收藏</p>\r\n            <yd-button  slot=\"right\" type=\"hollow\"  @click.native=\"deleteItemall\">清空</yd-button>\r\n        </yd-navbar>\r\n        <!--个人信息设置-->\r\n        <template>\r\n            <yd-infinitescroll :callback=\"loadList\" ref=\"infinitescrollDemo\">\r\n\r\n                <yd-list theme=\"1\" slot=\"list\">\r\n                    <yd-list-item v-for=\"item, key in list\" :key=\"key\">\r\n                        <img slot=\"img\" :src=\"item.original_img\">\r\n                        <span slot=\"title\">{{item.goods_name}}</span>\r\n                        <yd-list-other slot=\"other\">\r\n                            <div>\r\n                                <span class=\"list-del-price\">¥{{item.shop_price}}</span>\r\n                            </div>\r\n                            <yd-button  @click.native=\"unfollow(item.goods_id)\"  class=\"border_c\"  type=\"hollow\">取消收藏</yd-button>\r\n                        </yd-list-other>\r\n                    </yd-list-item>\r\n                </yd-list>\r\n\r\n                <!-- 数据全部加载完毕显示 -->\r\n                <span slot=\"doneTip\">暂时没有很多收藏...</span>\r\n\r\n                <!-- 加载中提示，不指定，将显示默认加载中图标 -->\r\n                <img slot=\"loadingTip\" src=\"http://static.ydcss.com/uploads/ydui/loading/loading10.svg\"/>\r\n\r\n            </yd-infinitescroll>\r\n        </template>\r\n        <!--收获地址-->\r\n\r\n    </div>\r\n</template>\r\n<script>\r\n    import Vue from 'vue';\r\n    import {InfiniteScroll} from 'vue-ydui/dist/lib.rem/infinitescroll';\r\n    /* 使用px：import {InfiniteScroll} from 'vue-ydui/dist/lib.px/infinitescroll'; */\r\n    Vue.component(InfiniteScroll.name, InfiniteScroll);\r\n    export default {\r\n        data() {\r\n            return {\r\n                page: 1,\r\n                pageSize: 6,\r\n                list: [\r\n                 ]\r\n            }\r\n        },\r\n        created:function(){\r\n            this.loadList();\r\n        },\r\n        methods: {\r\n            goback () {\r\n                this.$router.go(-1)\r\n            },\r\n\r\n            loadList() {\r\n                var that = this;\r\n                that.$axios.get('/collect_list', {\r\n                    params: {\r\n                        token: storeWithExpiration.get('token'),\r\n                        page:that.page\r\n                    }\r\n                }).then(function (response) {\r\n                    const _list = response.data.data;\r\n\r\n                    that.list = [...that.list, ..._list];\r\n\r\n                    if (_list.length < that.pageSize || that.page == 30) {\r\n                        /* 所有数据加载完毕 */\r\n                        that.$refs.infinitescrollDemo.$emit('ydui.infinitescroll.loadedDone');\r\n                        return;\r\n                    }\r\n\r\n                    /* 单次请求数据完毕 */\r\n                    that.$refs.infinitescrollDemo.$emit('ydui.infinitescroll.finishLoad');\r\n\r\n                    that.page++;\r\n                });\r\n\r\n            },\r\n            // 取消收藏\r\n            unfollow(e){\r\n                var goods_id =e\r\n                var _that =this;\r\n                var token = window.storeWithExpiration.get('token') || '';\r\n                var url = \"/del_collectlist?token=\" + token + \"&goods_id=\" + goods_id;\r\n                _that.$dialog.confirm({\r\n                    title: '取消收藏',\r\n                    mes: '确定要取消收藏吗？',\r\n                    opts: () => {\r\n                        _that.$axios.get(url).then(function (res) {\r\n                            if (res.status == 200){\r\n                                return res.data\r\n                            }\r\n\r\n                        }).then(function (res) {\r\n                            if (res.code == 2000){\r\n                                _that.$dialog.toast({\r\n                                    mes: '取消收藏成功',\r\n                                    timeout: 1000,\r\n                                    icon: 'success'\r\n                                });\r\n                                for(var i=0;i<_that.list.length;i++){\r\n                                    if( goods_id==_that.list[i].goods_id ){\r\n                                        _that.list.splice(i,1);\r\n                                    }\r\n                                }\r\n\r\n                            }\r\n\r\n\r\n                        }).catch(function (error) {\r\n                            console.log(error)\r\n                        })\r\n                    }\r\n                });\r\n\r\n\r\n\r\n            },\r\n            //取消全部\r\n            //全部删除\r\n            deleteItemall() {\r\n                var that=this\r\n                if(that.list.length>0 ){\r\n                    that.$dialog.confirm({\r\n                        title: '确定要清空所有收藏吗？',\r\n                        mes: '确认!',\r\n                        opts: function() {\r\n\r\n                            var token = window.storeWithExpiration.get('token');\r\n                            var url = \"/users/clearcollectlist\";\r\n                            that.$axios.get(url, {\r\n                                params: {\r\n                                    token: storeWithExpiration.get('token'),\r\n                                }\r\n                            }) .then(function (response) {\r\n                                if (response.status == '200') {\r\n                                    return response.data;\r\n                                }\r\n                            }).then(function (json) {\r\n                                that.list.splice(0,that.list.length);\r\n\r\n                            }).catch(function (ex) {\r\n                                console.log(ex);\r\n                            });\r\n                        }\r\n                    });\r\n                } else {\r\n                    that.$dialog.alert({mes: '收藏空空如也，暂不需要清理'});\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n</script>\r\n<style>\r\n    .margin{ padding-top: 1.05rem;}\r\n    .border_c{border: 1px solid #af773e; color:#af773e; padding: .1rem; height: .3rem; font-size: .2rem }\r\n\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/user/fans/follow.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"margin\"},[_c('yd-navbar',{attrs:{\"fixed\":true}},[_c('router-link',{attrs:{\"slot\":\"left\",\"to\":\"\"},slot:\"left\"},[_c('yd-navbar-back-icon',{nativeOn:{\"click\":function($event){return _vm.goback($event)}}},[_vm._v(\"返回\")])],1),_vm._v(\" \"),_c('p',{staticStyle:{\"font-size\":\".3rem\"},attrs:{\"slot\":\"center\"},slot:\"center\"},[_vm._v(\"收藏\")]),_vm._v(\" \"),_c('yd-button',{attrs:{\"slot\":\"right\",\"type\":\"hollow\"},nativeOn:{\"click\":function($event){return _vm.deleteItemall($event)}},slot:\"right\"},[_vm._v(\"清空\")])],1),_vm._v(\" \"),[_c('yd-infinitescroll',{ref:\"infinitescrollDemo\",attrs:{\"callback\":_vm.loadList}},[_c('yd-list',{attrs:{\"slot\":\"list\",\"theme\":\"1\"},slot:\"list\"},_vm._l((_vm.list),function(item,key){return _c('yd-list-item',{key:key},[_c('img',{attrs:{\"slot\":\"img\",\"src\":item.original_img},slot:\"img\"}),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(item.goods_name))]),_vm._v(\" \"),_c('yd-list-other',{attrs:{\"slot\":\"other\"},slot:\"other\"},[_c('div',[_c('span',{staticClass:\"list-del-price\"},[_vm._v(\"¥\"+_vm._s(item.shop_price))])]),_vm._v(\" \"),_c('yd-button',{staticClass:\"border_c\",attrs:{\"type\":\"hollow\"},nativeOn:{\"click\":function($event){return _vm.unfollow(item.goods_id)}}},[_vm._v(\"取消收藏\")])],1)],1)}),1),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"doneTip\"},slot:\"doneTip\"},[_vm._v(\"暂时没有很多收藏...\")]),_vm._v(\" \"),_c('img',{attrs:{\"slot\":\"loadingTip\",\"src\":\"http://static.ydcss.com/uploads/ydui/loading/loading10.svg\"},slot:\"loadingTip\"})],1)]],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-6f90f400\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/user/fans/follow.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6f90f400\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./follow.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./follow.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./follow.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6f90f400\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./follow.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user/fans/follow.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
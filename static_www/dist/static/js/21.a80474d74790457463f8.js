webpackJsonp([21],{"31EE":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("xd7I"),i=o("6YZK"),s=o("8kzU");n.default.component(s.Tab.name,s.Tab),n.default.component(s.TabPanel.name,s.TabPanel),n.default.component(i.CountDown.name,i.CountDown);var a={data:function(){return{mygoods:[],downgoods:[],tabgoods:0,items:[{label:"在线"},{label:"下线"}],isShow:!1}},mounted:function(){this.showdata()},methods:{goback:function(){this.$router.go(-1)},showdata:function(){var t="/my_publish_goods?token="+window.storeWithExpiration.get("token")+"&time=1",e=this;e.mygoods=[],e.$axios.get(t).then(function(t){if(200==t.status){for(var o=0;o<t.data.data.my_goods.length;o++)t.data.data.my_goods[o].endTime=e.timestampToTime(t.data.data.my_goods[o].endTime),e.mygoods.push(t.data.data.my_goods[o]);e.isShow=!0,console.log(e.mygoods)}}).catch(function(t){console.log(t)})},goodsdown:function(t){var e=this;e.$dialog.confirm({title:"商品下架",mes:"确定要下架此商品?",opts:function(){var o=window.storeWithExpiration.get("token"),n="/down_paipin?goods_id="+t+"&token="+o;e.$axios.get(n).then(function(o){if(console.log(o),200==o.status)if(2e3==o.data.code){e.$dialog.toast({mes:"下架成功",timeout:1500,icon:"success"});for(var n=0;n<e.mygoods.length;n++)t==e.mygoods[n].goods_id&&e.mygoods.splice(n,1)}else e.$dialog.toast({mes:o.data.message,timeout:1500})}).catch(function(t){console.log(t)})}})},goods_dows:function(t){var e=this,o=window.storeWithExpiration.get("token");if(console.log(t),0==t)e.$dialog.loading.open("数据加载中"),setTimeout(function(){e.tabgoods=t,e.$dialog.loading.close(),e.showdata()},1e3);else if(1==t){e.mygoods=[];var n="/my_publish_goods?token="+o+"&time=2";e.$dialog.loading.open("数据加载中"),setTimeout(function(){e.tabgoods=t,e.$dialog.loading.close(),e.$axios.get(n).then(function(t){if(200==t.status){for(var o=0;o<t.data.data.my_goods.length;o++)t.data.data.my_goods[o].endTime=e.timestampToTime(t.data.data.my_goods[o].endTime),e.mygoods.push(t.data.data.my_goods[o]);e.isShow=!1,console.log(e.mygoods)}}).catch(function(t){console.log(t)})},1e3)}},goodsedit:function(t){this.$router.push({name:"editgoods_link",query:{goods_id:t},meta:{title:"商品编辑"}})},goodsdetais:function(t){this.$router.push({path:"/index/"+t})},timestampToTime:function(t){var e=new Date(1e3*t);return e.getFullYear()+"/"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/")+(e.getDate()+" ")+(e.getHours()+":")+(e.getMinutes()+":")+e.getSeconds()}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"margin"},[n("yd-navbar",{attrs:{fixed:!0}},[n("router-link",{attrs:{slot:"left",to:""},slot:"left"},[n("yd-navbar-back-icon",{nativeOn:{click:function(e){return t.goback(e)}}},[t._v("返回")])],1),t._v(" "),n("p",{staticStyle:{"font-size":".3rem"},attrs:{slot:"center"},slot:"center"},[t._v("商品管理")]),t._v(" "),n("img",{staticStyle:{width:".5rem"},attrs:{slot:"right",src:o("rgYI")},slot:"right"})],1),t._v(" "),n("yd-tab",{attrs:{"active-color":"#af773e","item-click":t.goods_dows,"prevent-default":!1},model:{value:t.tabgoods,callback:function(e){t.tabgoods=e},expression:"tabgoods"}},t._l(t.items,function(e){return n("yd-tab-panel",{key:e.key,attrs:{label:e.label}},t._l(t.mygoods,function(e){return n("yd-radio-group",{key:e.goods_id,attrs:{color:"#af773e"}},[n("div",{staticClass:"want_img",on:{click:function(o){return t.goodsdetais(e.goods_id)}}},[n("div",{staticClass:"want_img_img"},[n("img",{attrs:{src:e.original_img}})]),t._v(" "),n("div",{staticClass:"want_img_title"},[n("p",[n("strong",[t._v(t._s(e.goods_name))])]),t._v(" "),n("p",{staticClass:"group_hair_title_e"},[t._v("\n                            "+t._s(e.goods_content)+"\n                        ")])])]),t._v(" "),n("div",{staticClass:"want_list"},[n("ul",[n("li",{staticClass:"li_one"},[t._v("\n                          时间："),[n("yd-countdown",{attrs:{time:e.endTime}})]],2),t._v(" "),n("li",{staticClass:"li_two",on:{click:function(o){return t.goodsedit(e.goods_id)}}},[t._v("编辑")]),t._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"li_three",on:{click:function(o){return t.goodsdown(e.goods_id)}}},[t._v("下架")])])])])}),1)}),1)],1)},staticRenderFns:[]};var d=o("C7Lr")(a,r,!1,function(t){o("cdWm")},"data-v-8a15e214",null);e.default=d.exports},"6YZK":function(t,e,o){var n;n=function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="/dist/",e(0)}({0:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CountDown=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(o(83));e.CountDown=n.default},1:function(t,e){t.exports=function(t,e,o,n){var i,s=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(i=t,s=t.default);var r="function"==typeof s?s.options:s;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),o&&(r._scopeId=o),n){var d=r.computed||(r.computed={});Object.keys(n).forEach(function(t){var e=n[t];d[t]=function(){return e}})}return{esModule:i,exports:s,options:r}}},83:function(t,e,o){var n=o(1)(o(264),o(183),null,null);t.exports=n.exports},183:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("span",[o("span",{domProps:{innerHTML:t._s(t.str)}}),t._v(" "),t.showTpl?o("span",{ref:"tpl"},[t._t("default")],2):t._e()])},staticRenderFns:[]}},264:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"yd-countdown",data:function(){return{str:"",timer:null,tempFormat:"",showTpl:!0}},props:{time:{type:[String,Number,Date]},format:{type:String,default:"{%d}天{%h}时{%m}分{%s}秒"},timetype:{validator:function(t){return["datetime","second","timestamp"].indexOf(t)>-1},default:"datetime"},callback:{type:Function},doneText:{type:String,default:"已结束"}},watch:{time:function(t){clearInterval(this.timer),t&&this.run()}},methods:{run:function(){this.time&&("second"===this.timetype?this.lastTime=Math.floor(new Date/1e3)+~~this.time:"timestamp"===this.timetype?this.lastTime=Math.floor(new Date(this.time).getTime()):this.lastTime=Math.floor(new Date(this.time).getTime()/1e3),this.time instanceof Date&&(this.lastTime=Math.floor(this.time.getTime()/1e3)),this.doRun(),this.timer=setInterval(this.doRun,1e3))},doRun:function(){var t=this.lastTime-Math.floor((new Date).getTime()/1e3);t>0?this.str=this.timestampTotime(t):(this.callback&&this.callback(),this.str=this.doneText,clearInterval(this.timer))},timestampTotime:function(t){var e=this.tempFormat,o={};o.s=t%60,t=Math.floor(t/60),o.m=t%60,t=Math.floor(t/60),o.h=t%24,o.d=Math.floor(t/24);var n=function(t){return t<=0?"00":t<10?"0"+t:t};return["d","h","m","s"].forEach(function(t){var i=n(o[t]).toString().split("");e=(e=(e=(e=e.replace("{%"+t+"}",n(o[t]))).replace("{%"+t+"0}",0!=~~i[i.length-3]?i[i.length-3]:"")).replace("{%"+t+"1}",~~i[i.length-2])).replace("{%"+t+"2}",~~i[i.length-1])}),e}},mounted:function(){var t=this;this.$nextTick(function(){t.tempFormat=t.$slots.default?t.$refs.tpl.innerHTML:t.format,t.showTpl=!1,t.run()})},beforeDestroy:function(){clearInterval(this.timer)}}}})},t.exports=n()},cdWm:function(t,e){}});
//# sourceMappingURL=21.a80474d74790457463f8.js.map